<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>我们的爱情故事</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link href="style/default.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/garden.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.css"> -->
    <link rel="stylesheet" href="style/animate.css">

</head>

<body>
    <div id="mainDiv">
        <div id="content">
            <div id="code">
                <span class="comments">"""</span><br />
                <span class="space"/><span class="comments">今天是个特殊的日子,</span><br />
                <span class="space"/><span class="comments">所以我打算用自己的方式来表达我对你的爱...</span><br />
                <span class="comments">"""</span><br />
                liaozhiming = Boy(<span class="string">"廖志明"</span>)<br />
                tangjiangyan = Girl(<span class="string">"唐江艳"</span>)<br />
                <span class="comments"># 2019年12月8日,我们相识于人海茫茫之中...</span><br />
                liaozhiming.meet(tangjiangyan)<br />
                <span class="comments"># 2019年12月8日-<span id='date_now'></span>,我们经历了相知相恋...</span><br />
                liaozhiming.loving(tangjianyan)<br />
                <span class="comments"># 在这个特殊的日子,我想对你说,接下来的日子里,我想和你继续相守</span><br />
                liaozhiming.say_hope_loveyou_forever(tangjiangyan)<br />
                <span class="comments"># 你说,我平时需要多关心一下你,多陪一下你, 多善于表达一下自己</span><br />
                <span class="comments"># And take care of u and our love.</span><br />
                liaozhiming.take_care_of(tangjiangyan)<br />
                <span class="comments"># 所以我一直在努力,我有信心,我会去做好这些</span><br />
                <span class="comments"># 你问我对你的爱时间有多久.</span><br />
                <span class="comments">love_time_no_limit = </span>  <span class="keyword">true</span><br />
                <span class="keyword">while</span>(love_time_no_limit):<br />
                <span class="placeholder"/><span class="comments"># 有一份真挚的感情摆在我的面前，我不想等我失去的时候才追悔莫及,人间最痛苦的事莫过于此,接下来,我会对那个女孩说三个字：我爱你，如果非要在这份爱上加一个期限，我希望是余生！</span><br />
                <span class="placeholder"/>liaozhiming.love(tangjiangyan)<br />
                <span class="placeholder"/><span class="comments"># 执子之手,与子偕老.</span><br />
                <span class="placeholder"/><span class="comments"># 往后余生我陪你走</span><br />
                <span class="placeholder"/>liaozhiming.say_loveyou_forever(tangjiangyan)<br />
                <span class="comments"># 你让我知道从激情到亲情,从感动到感恩,从浪漫到相守.时间越久,感情越深,越浓...</span><br />
                tangjianyan.marry_with(liaozhiming)<br />
                liaozhiming.live_happily_with(tangjianyan)<br />

            </div>
            <div id="loveHeart">
                <canvas id="garden" class="animated infinite pulse"></canvas>
                <div id="words">
                    <div id="messages">
                       亲爱的唐江艳,这是我们相爱在一起的时光!
                       <div id="elapseClock"></div>
                       <div id="loveu">&nbsp; &nbsp;爱你,直到永永远远!<br/>
                           <div class="signature animated infinite pulse">- <a href="confession.html" style="text-decoration: none; ">廖先生</a></div>
                       </div>
                   </div>
               </div>
           </div>
       </div>

   </div>
   <!-- 动画效果请浏览:https://www.dowebok.com/demo/2014/98/-->
   <!-- <script src="https://cdn.bootcdn.net/ajax/libs/jquery-backstretch/2.1.18/jquery.backstretch.min.js"></script> -->
   <script src="js/jquery.backstretch.min.js"></script>
   <script type="text/javascript">
    var offsetX = $("#loveHeart").width() / 2;
    var offsetY = $("#loveHeart").height() / 2 - 55;

    var together = new Date();
    var date_now = together.getFullYear()+'年'+(together.getMonth()+1)+'月'+together.getDate()+'日';
    // 月份:0代表1月
    together.setFullYear(2019, 11, 8);
    together.setHours(0);
    together.setMinutes(0);
    together.setSeconds(0);
    together.setMilliseconds(0);

    var bodyBgs = [    //创建一个数组变量来存储背景图片的路径
    "img/robocop-1987-wallpaper-2.jpg",
    "img/ghostbusters-564cdb8dcf00d.jpg",
    "img/robocop-1987-wallpaper-2.jpg",
    "img/love.jpg",
    "img/love1.jpg",
    "img/love2.jpg"
    ]
    
    if (!document.createElement('canvas').getContext) {
        var msg = document.createElement("div");
        msg.id = "errorMsg";
        msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 
        document.body.appendChild(msg);
        $("#code").css("display", "none")
        $("#copyright").css("position", "absolute");
        $("#copyright").css("bottom", "10px");
        document.execCommand("stop");
    } else {
        setTimeout(function () {
            adjustWordsPosition();
            startHeartAnimation();
        }, 5000);

        setInterval(function () {
            timeElapse(together);
        }, 1000);
        $("#date_now").html(date_now);
        //adjustCodePosition();
        $("#code").typewriter();

        // 设置指定秒数后执行定时器
        setTimeout(function(){
        //配置背景
        setInterval(function () {
            var currentImage = bodyBgs[Math.round(Math.random()*bodyBgs.length)];
            var random_offset = Math.round(Math.random()*3000+3000)
            $.backstretch(currentImage, {
                duration: random_offset,
				fade: 8000-random_offset,
                // transitionDuration: 3000,
                pixelRatio: "auto"
            }); //元素背景，切换现实
        }, 8000);
    }, 90000)
    }
</script>

<audio autoplay="autoplay" loop id='audioBox'>
</audio>
<script type="text/javascript"> 
        var arr = [
            './music/def.mp3',
            "./music/区瑞强 - 偏偏喜欢你.mp3", 
            "./music/那些年_-_胡夏.mp3", 
            './music/田馥甄 - 小幸运.mp3',
            './music/def.mp3',
            './music/你是人间四月天(Live)-邵帅.mp3'
        ];
        var myAudio = new Audio(); 
        myAudio.preload = true; 
        myAudio.controls = true; 
        myAudio.src = arr[Math.round(Math.random() * (arr.length-1))]
        console.log(myAudio.src); 
        //myAudio.src = arr.pop();         //每次读数组最后一个元素 
        myAudio.addEventListener('ended', playEndedHandler, false); 
        myAudio.play(); 
        document.getElementById("audioBox").appendChild(myAudio); 
        myAudio.loop = false;//禁止循环，否则无法触发ended事件 
        function playEndedHandler(){ 
        //myAudio.src = arr.pop(); 
        myAudio.src = arr[Math.round(Math.random() * (arr.length-1))]; 
        myAudio.play(); 
        // console.log(myAudio.src); 
        !arr.length && myAudio.removeEventListener('ended',playEndedHandler,false);//只有一个元素时解除绑定 
    } 
</script> 
</body>
</html>